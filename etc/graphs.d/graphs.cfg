# This file defines how RRD graphs are generated by the showgraph CGI.
#
# Each section begins with a "[SERVICE]" indicator - this is the name passed
# to showgraph.cgi?host=foo&service=SERVICE
#
# A graph has a TITLE and a YAXIS setting - these are texts shown as the
# title of the graph, and the YAXIS heading respectively. (The X-axis is
# always time-based).
#
# If a fixed set of RRD files are used for the graph, you just write those
# in the RRDtool definitions. 
#
# For graphs that use multiple RRD files as input, you specify a filename
# pattern in the FNPATTERN statement, and optionally a pattern of files
# to exclude from the graph with EXFNPATTERN (see "[tcp]" for an example).
# When FNPATTERN is used, you can use "@RRDFN@" in the RRDtool definitions
# to pick up each filename. "@RRDIDX@" is an index (starting at 0) for each
# file in the set. "@RRDPARAM@" contains the first word extracted from the
# pattern of files (see e.g. "[memory]" how this is used). "@COLOR@" picks
# a new color for each graph automatically.
#
# The "foo-multi" graph definitions are used by the "Metrics report"
# utility. The have an FNPATTERN definition, but in this case you can NOT
# use a regular expression pattern. The FNPATTERN definition for multi-
# graphs must be the exact filename of the RRD file to pull data from.
#
# The remainder of the lines in each definition are passed directly to the
# RRDtool rrd_graph() routine.
#
# Most of these RRD definitions are from the larrd-grapher.cgi from LARRD 0.43c.

# -c CANVAS#000000 -c FONT#FFFFFF -c BACK#000000


[pitempcpu]
	TITLE Pi Temperature
	YAXIS Celsius
	DEF:cpu=pitemp.rrd:CPU:AVERAGE
	LINE1:cpu#FF0000:GPU Temperature
        --color=BACK#000000
        --color=CANVAS#000000
        --color=FONT#FFFFFF
	GPRINT:cpu:LAST: \: %5.1lf (cur)
	GPRINT:cpu:MAX: \: %5.1lf (max)
	GPRINT:cpu:MIN: \: %5.1lf (min)
	GPRINT:cpu:AVERAGE: \: %5.1lf (avg)\n

[pitempgpu]
	TITLE Pi Temperature
	YAXIS Celsius
	DEF:gpu=pitemp.rrd:GPU:AVERAGE
	LINE1:gpu#0000FF:GPU Temperature
        --color=BACK#000000
        --color=CANVAS#000000
        --color=FONT#FFFFFF
	GPRINT:gpu:LAST: \: %5.1lf (cur)
	GPRINT:gpu:MAX: \: %5.1lf (max)
	GPRINT:gpu:MIN: \: %5.1lf (min)
	GPRINT:gpu:AVERAGE: \: %5.1lf (avg)\n

[signaldpower]
	TITLE Downstream Power level
	YAXIS dBmV
	FNPATTERN signal.DOWN(.*).rrd
	DEF:p@RRDIDX@=@RRDFN@:power:AVERAGE
	LINE1:p@RRDIDX@#@COLOR@:Channel @RRDPARAM@
	GPRINT:p@RRDIDX@:LAST: \: %5.1lf (cur)
	GPRINT:p@RRDIDX@:MAX: \: %5.1lf (max)
	GPRINT:p@RRDIDX@:MIN: \: %5.1lf (min)
	GPRINT:p@RRDIDX@:AVERAGE: \: %5.1lf (avg)\n

[signalupower]
	TITLE Upstream Power level
	YAXIS dBmV
	FNPATTERN signal.UP(.*).rrd
	DEF:p@RRDIDX@=@RRDFN@:power:AVERAGE
	LINE1:p@RRDIDX@#@COLOR@:Channel @RRDPARAM@
	GPRINT:p@RRDIDX@:LAST: \: %5.1lf (cur)
	GPRINT:p@RRDIDX@:MAX: \: %5.1lf (max)
	GPRINT:p@RRDIDX@:MIN: \: %5.1lf (min)
	GPRINT:p@RRDIDX@:AVERAGE: \: %5.1lf (avg)\n

[speed]
        TITLE Network Traffic
        YAXIS Mb/s
	DEF:d=speed.rrd:download:AVERAGE
	DEF:u=speed.rrd:upload:AVERAGE
	LINE2:d#@COLOR@:Download
	GPRINT:d:LAST: \: %5.1lf%sb/s (cur)
	GPRINT:d:MAX: \: %5.1lf%sb/s (max)
	GPRINT:d:MIN: \: %5.1lf%sb/s (min)
	GPRINT:d:AVERAGE: \: %5.1lf%sb/s (avg)\n
	LINE2:u#@COLOR@:Upload  
	GPRINT:u:LAST: \: %5.1lf%sb/s (cur)
	GPRINT:u:MAX: \: %5.1lf%sb/s (max)
	GPRINT:u:MIN: \: %5.1lf%sb/s (min)
	GPRINT:u:AVERAGE: \: %5.1lf%sb/s (avg)\n

[speedping]
	TITLE Latency
	YAXIS m/s
	DEF:l=speed.rrd:latency:AVERAGE
	LINE2:l#@COLOR@:Ping
	GPRINT:l:LAST: \: %5.1lfm (cur)
	GPRINT:l:MAX: \: %5.1lfm (max)
	GPRINT:l:MIN: \: %5.1lfm (min)
	GPRINT:l:AVERAGE: \: %5.1lfm (avg)\n

[mysql]
	TITLE MySQL Questions
	YAXIS Count  
	DEF:queries=mysql,Questions.rrd:lambda:AVERAGE
	LINE2:queries#0000FF:Questions per second
	COMMENT:\n
	GPRINT:queries:LAST:Questions  \: %5.1lf (cur)
	GPRINT:queries:MAX: \: %5.1lf (max)
	GPRINT:queries:MIN: \: %5.1lf (min)
	GPRINT:queries:AVERAGE: \: %5.1lf (avg)\n
